{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Thomas BDC\\\\source\\\\repos\\\\liquid-glass\\\\src\\\\GlassElement\\\\GlassElement.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { getDisplacementFilter } from \"./getDisplacementFilter\";\nimport { getDisplacementMap } from \"./getDisplacementMap\";\nimport styles from \"./GlassElement.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GlassElement = _ref => {\n  _s();\n  let {\n    height,\n    width,\n    depth: baseDepth,\n    radius,\n    children,\n    strength,\n    chromaticAberration,\n    blur = 2,\n    debug = false,\n    zoom = 1\n  } = _ref;\n  const [clicked, setClicked] = useState(false);\n  let depth = baseDepth / (clicked ? 0.7 : 1);\n\n  // Position de la loupe\n  const [mouse, setMouse] = useState({\n    x: width / 2,\n    y: height / 2\n  });\n  const [showMagnifier, setShowMagnifier] = useState(false);\n  const magnifierRef = useRef(null);\n\n  // Clone du body pour la loupe\n  const [bodyClone, setBodyClone] = useState(null);\n  useEffect(() => {\n    if (showMagnifier) {\n      const body = document.body;\n      const clone = body.cloneNode(true);\n      // Nettoyage des scripts et vidéos\n      const scripts = clone.querySelectorAll('script, audio, video');\n      scripts.forEach(el => {\n        var _el$parentNode;\n        return (_el$parentNode = el.parentNode) === null || _el$parentNode === void 0 ? void 0 : _el$parentNode.removeChild(el);\n      });\n      setBodyClone(clone);\n    } else {\n      setBodyClone(null);\n    }\n  }, [showMagnifier]);\n  const handleMouseMove = e => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    setMouse({\n      x,\n      y\n    });\n  };\n  const style = {\n    height: `${height}px`,\n    width: `${width}px`,\n    borderRadius: `${radius}px`,\n    backdropFilter: `blur(${blur / 2}px) url('${getDisplacementFilter({\n      height,\n      width,\n      radius,\n      depth,\n      strength,\n      chromaticAberration\n    })}') blur(${blur}px) brightness(1.1) saturate(1.5) `,\n    position: \"relative\",\n    overflow: \"hidden\"\n  };\n  if (debug === true) {\n    style.background = `url(\"${getDisplacementMap({\n      height,\n      width,\n      radius,\n      depth\n    })}\")`;\n    style.boxShadow = \"none\";\n  }\n\n  // Style de la loupe\n  const magnifierStyle = {\n    position: \"fixed\",\n    left: mouse.x + window.scrollX - width / 2,\n    top: mouse.y + window.scrollY - height / 2,\n    width: `${width}px`,\n    height: `${height}px`,\n    overflow: \"hidden\",\n    border: \"2px solid #555\",\n    borderRadius: \"50%\",\n    zIndex: 10000,\n    background: \"white\",\n    boxShadow: \"0 4px 32px rgba(0,0,0,0.2)\",\n    pointerEvents: \"none\",\n    display: showMagnifier ? \"block\" : \"none\"\n  };\n  const magnifierContentStyle = {\n    position: \"absolute\",\n    left: `-${mouse.x * zoom - width / 2}px`,\n    top: `-${mouse.y * zoom - height / 2}px`,\n    width: `${window.innerWidth * zoom}px`,\n    height: `${window.innerHeight * zoom}px`,\n    transform: `scale(${zoom})`,\n    transformOrigin: \"left top\",\n    userSelect: \"none\",\n    pointerEvents: \"none\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.box,\n    style: style,\n    onMouseDown: () => setClicked(true),\n    onMouseUp: () => setClicked(false),\n    onMouseMove: e => {\n      setShowMagnifier(true);\n      handleMouseMove(e);\n    },\n    onMouseLeave: () => setShowMagnifier(false),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"100%\",\n        height: \"100%\",\n        borderRadius: \"inherit\",\n        transform: `scale(${zoom})`,\n        transformOrigin: \"center center\",\n        overflow: \"hidden\"\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), showMagnifier && bodyClone && /*#__PURE__*/createPortal(/*#__PURE__*/_jsxDEV(\"div\", {\n      style: magnifierStyle,\n      ref: magnifierRef,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: magnifierContentStyle,\n        dangerouslySetInnerHTML: {\n          __html: bodyClone.innerHTML\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }, this), document.body)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n};\n_s(GlassElement, \"HGVsFHP0b1kOHEr0aaKUNe1KryI=\");\n_c = GlassElement;\nvar _c;\n$RefreshReg$(_c, \"GlassElement\");","map":{"version":3,"names":["useState","useRef","useEffect","createPortal","getDisplacementFilter","getDisplacementMap","styles","jsxDEV","_jsxDEV","GlassElement","_ref","_s","height","width","depth","baseDepth","radius","children","strength","chromaticAberration","blur","debug","zoom","clicked","setClicked","mouse","setMouse","x","y","showMagnifier","setShowMagnifier","magnifierRef","bodyClone","setBodyClone","body","document","clone","cloneNode","scripts","querySelectorAll","forEach","el","_el$parentNode","parentNode","removeChild","handleMouseMove","e","rect","currentTarget","getBoundingClientRect","clientX","left","clientY","top","style","borderRadius","backdropFilter","position","overflow","background","boxShadow","magnifierStyle","window","scrollX","scrollY","border","zIndex","pointerEvents","display","magnifierContentStyle","innerWidth","innerHeight","transform","transformOrigin","userSelect","className","box","onMouseDown","onMouseUp","onMouseMove","onMouseLeave","fileName","_jsxFileName","lineNumber","columnNumber","ref","dangerouslySetInnerHTML","__html","innerHTML","_c","$RefreshReg$"],"sources":["C:/Users/Thomas BDC/source/repos/liquid-glass/src/GlassElement/GlassElement.tsx"],"sourcesContent":["import { CSSProperties, ReactNode, useState, useRef, useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport {\n  getDisplacementFilter,\n  DisplacementOptions,\n} from \"./getDisplacementFilter\";\nimport { getDisplacementMap } from \"./getDisplacementMap\";\nimport styles from \"./GlassElement.module.css\";\n\ntype GlassElementProps = DisplacementOptions & {\n  children?: ReactNode | undefined;\n  blur?: number;\n  debug?: boolean;\n  zoom?: number;\n};\n\nexport const GlassElement = ({\n  height,\n  width,\n  depth: baseDepth,\n  radius,\n  children,\n  strength,\n  chromaticAberration,\n  blur = 2,\n  debug = false,\n  zoom = 1,\n}: GlassElementProps) => {\n  const [clicked, setClicked] = useState(false);\n  let depth = baseDepth / (clicked ? 0.7 : 1);\n\n  // Position de la loupe\n  const [mouse, setMouse] = useState<{ x: number; y: number }>({ x: width / 2, y: height / 2 });\n  const [showMagnifier, setShowMagnifier] = useState(false);\n  const magnifierRef = useRef<HTMLDivElement>(null);\n\n  // Clone du body pour la loupe\n  const [bodyClone, setBodyClone] = useState<HTMLElement | null>(null);\n\n  useEffect(() => {\n    if (showMagnifier) {\n      const body = document.body;\n      const clone = body.cloneNode(true) as HTMLElement;\n      // Nettoyage des scripts et vidéos\n      const scripts = clone.querySelectorAll('script, audio, video');\n      scripts.forEach((el) => el.parentNode?.removeChild(el));\n      setBodyClone(clone);\n    } else {\n      setBodyClone(null);\n    }\n  }, [showMagnifier]);\n\n  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    setMouse({ x, y });\n  };\n\n  const style: CSSProperties = {\n    height: `${height}px`,\n    width: `${width}px`,\n    borderRadius: `${radius}px`,\n    backdropFilter: `blur(${blur / 2}px) url('${getDisplacementFilter({\n      height,\n      width,\n      radius,\n      depth,\n      strength,\n      chromaticAberration,\n    })}') blur(${blur}px) brightness(1.1) saturate(1.5) `,\n    position: \"relative\",\n    overflow: \"hidden\",\n  };\n\n  if (debug === true) {\n    style.background = `url(\"${getDisplacementMap({\n      height,\n      width,\n      radius,\n      depth,\n    })}\")`;\n    style.boxShadow = \"none\";\n  }\n\n  // Style de la loupe\n  const magnifierStyle: CSSProperties = {\n    position: \"fixed\",\n    left: mouse.x + window.scrollX - width / 2,\n    top: mouse.y + window.scrollY - height / 2,\n    width: `${width}px`,\n    height: `${height}px`,\n    overflow: \"hidden\",\n    border: \"2px solid #555\",\n    borderRadius: \"50%\",\n    zIndex: 10000,\n    background: \"white\",\n    boxShadow: \"0 4px 32px rgba(0,0,0,0.2)\",\n    pointerEvents: \"none\",\n    display: showMagnifier ? \"block\" : \"none\",\n  };\n\n  const magnifierContentStyle: CSSProperties = {\n    position: \"absolute\",\n    left: `-${mouse.x * zoom - width / 2}px`,\n    top: `-${mouse.y * zoom - height / 2}px`,\n    width: `${window.innerWidth * zoom}px`,\n    height: `${window.innerHeight * zoom}px`,\n    transform: `scale(${zoom})`,\n    transformOrigin: \"left top\",\n    userSelect: \"none\",\n    pointerEvents: \"none\",\n  };\n\n  return (\n    <div\n      className={styles.box}\n      style={style}\n      onMouseDown={() => setClicked(true)}\n      onMouseUp={() => setClicked(false)}\n      onMouseMove={(e) => {\n        setShowMagnifier(true);\n        handleMouseMove(e);\n      }}\n      onMouseLeave={() => setShowMagnifier(false)}\n    >\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          borderRadius: \"inherit\",\n          transform: `scale(${zoom})`,\n          transformOrigin: \"center center\",\n          overflow: \"hidden\",\n        }}\n      >\n        {children}\n      </div>\n      {showMagnifier && bodyClone && createPortal(\n        <div style={magnifierStyle} ref={magnifierRef}>\n          <div\n            style={magnifierContentStyle}\n            dangerouslySetInnerHTML={{ __html: bodyClone.innerHTML }}\n          />\n        </div>,\n        document.body\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}